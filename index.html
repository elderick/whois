<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Whois</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
    crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  <link href="css/search.css" rel="stylesheet">
</head>

<body class="align">
  <div class="container">
    <div class="col-md-12 marginsearch">
      <div class="col-md-4">
        <img src="https://www.codemarket.com.br/site/upload/574dd993adb4aumblerito-camisa.png" class="aumblerito"></img>
      </div>
      <div class="col-md-8">
        <div class="col-md-12 title">WHOIS</div>
        <form class="col-md-12 form-wrapper">
          <input type="text" id="url" placeholder="Digite o nome do domínio" required></input>
          <button type="button" id="searchbutton" onclick="search(this)">Pesquisar</button>
        </form>
      </div>
    </div>
  </div>
  </div>
  <div class='col-md-12 domainsquare'>
    <div class="col-md-2"></div>
    <div class='col-md-4 '>
        <div class="floatleft domaintitle">Domínio:</div>
        <div class="floatleft text"  id="domain"></div>
      </div>
      <div class='col-md-4'>
        <div class="floatleft hosttitle">Provedor:</div>
        <div class="floatleft text" id="host"></div>
      </div>
      <div class="col-md-2"></div>
  </div>
  <div class="col-md-12">
    <div class="col-md-2"></div>
    <div class="col-md-8 box">
      <pre id='square'></pre>
    </div>
    <div class="col-md-2"></div>
  </div>
  </div>
</body>
<script src="js/jquery-3.2.1.min.js"></script>
<script type="text/javascript">
  // Ao carregar a pagina esconde a caixa que exibe o resultado da pesquisa
  $(document).ready(function () {
    $(".box").hide();
    $(".domainsquare").hide();
  });
  //função que chama api passando os o parametro de URL
  function search() {
    $.ajax({
      url: "https://whoisappp.herokuapp.com/whois?url=" + $('#url')[0].value,
      data: {},
      success: function (result) {
        // Insere o texto e mostra a exibe a caixa com o resultado da pesquisa
        $("#square").text(result["data"]);
        $("#domain").text(result["url"]);
        $("#host").text(result["host"]);
        $(".box").show();
        $(".domainsquare").show();
      }
    });
  }
  // funcao para carregar pesquisar quando o enter for pressionado e não ter reload na tela
  $(".form-wrapper").submit(function () {
    search();
    return false;
  });

</script>

</html>